
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>EDI BASTOS</title>
    <link rel="stylesheet" href="css/minitel-keyboard.css" />    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/default.min.css" />	<meta name="author" content="Alain Basty" />
    <meta name="keywords" content="minitel, vintage, technologie, videotex, basic, programmation" />
    <meta name="description" content="DÃ©veloppez des applications BASTOS (Basic) pour Minitel" />
	<!-- <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest"> -->

    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      .editor-container {
        display: flex;
        height: 100vh;
        gap: 10px;
        padding: 10px;
        background-color: #3f292b;
      }
      .minitel-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
      }
      .code-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
      }
      .CodeMirror {
        flex: 1;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 12px;
      }
      .minitel-wrapper {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
    </style>
  </head>
  <body>

    <div class="editor-container">
      <div class="minitel-section">
        <div class="minitel-wrapper">
          <x-minitel data-socket="ws://localhost:1967" data-speed="4800" data-color="false">
        <canvas class="minitel-screen" data-minitel="screen"></canvas>
        <canvas class="minitel-cursor" data-minitel="cursor"></canvas>
        <import src="import/minitel-keyboard.html"></import>
        <font  style="font-size:14px;color:White;font-family:Arial,Helvetica">
        <code>Connected to BASTOS</code>
        </font>
        <audio class="minitel-beep" data-minitel="beep">
            <source src="sound/minitel-bip.mp3" type="audio/mpeg"/>
            Too bad, your browser does not support HTML5 audio or mp3 format.
        </audio>
      </x-minitel>
        </div>
      </div>
      <div class="code-section">
        <h3 style="margin: 0 0 10px 0; font-family: Arial, sans-serif; color: #333;">Code Editor</h3>
        <div id="code-editor"></div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/basic/basic.min.js"></script>
    <script src="library/generichelper/generichelper.js"></script>
    <script src="library/import-html/import-html.js"></script>
    <script src="library/autocallback/autocallback.js"></script>
    <script src="library/query-parameters/query-parameters.js"></script>
    <script src="library/finite-stack/finite-stack.js"></script>
    <script src="library/key-simulator/key-simulator.js"></script>
    <script src="library/settings-suite/settings-suite.js"></script>
    <script src="library/minitel/constant.js"></script>
    <script src="library/minitel/protocol.js"></script>
    <script src="library/minitel/elements.js"></script>
    <script src="library/minitel/text-grid.js"></script>
    <script src="library/minitel/char-size.js"></script>
    <script src="library/minitel/font-sprite.js"></script>
    <script src="library/minitel/page-cell.js"></script>
    <script src="library/minitel/vram.js"></script>
    <script src="library/minitel/vdu-cursor.js"></script>
    <script src="library/minitel/vdu.js"></script>
    <script src="library/minitel/decoder.js"></script>
    <script src="library/minitel/keyboard.js"></script>
    <script src="library/minitel/minitel-emulator.js"></script>
    <script src="library/minitel/start-emulators.js"></script>

    <script src="app/minitel.js"></script>

    <script>
      // Initialize CodeMirror editor
      const editor = CodeMirror(document.getElementById('code-editor'), {
        mode: 'basic',
        theme: 'default',
        lineNumbers: true,
        indentUnit: 4,
        tabSize: 4,
        indentWithTabs: false,
        lineWrapping: true,
        autofocus: false
      });

      // Set initial placeholder text
      editor.setValue('10 PRINT "Hello BASTOS!"\n20 END');
    </script>

  </body>
</html>
